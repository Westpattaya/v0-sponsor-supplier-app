// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  previewFeatures = []
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Organizer {
  id           String   @id @default(cuid())
  name         String
  email        String   @unique
  passwordHash String?
  role         String   @default("organizer") // "organizer" | "sponsor"
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  events Event[]
}

model Event {
  id            String   @id @default(cuid())
  name          String
  university    String
  date          DateTime
  audienceSize  String
  description   String
  shortDescription String?
  photos        String?  // JSON array of photo URLs
  needs         String   // JSON array: ["money", "product", "booth", "giveaway"]
  categories    String   // JSON array of categories
  location      String
  venue         String?
  isOnline      Boolean  @default(false)
  budget        String?
  
  // Audience details
  audienceAgeRange    String?
  audienceInterests   String?
  audienceOccupation String?
  
  // Sponsorship details
  sponsorshipTiers   String? // JSON array of tier objects
  benefits           String? // JSON array of benefits
  timeline           String?
  deliverables       String? // JSON array
  
  // Organizer info
  organizerName      String
  organizerRole      String?
  organizerEmail     String
  organizerPhone     String?
  socialMediaLinks   String?
  
  createdBy   String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  organizer   Organizer @relation(fields: [createdBy], references: [id], onDelete: Cascade)
  offers      SponsorshipOffer[]
}

model Sponsor {
  id           String   @id @default(cuid())
  name         String
  email        String   @unique
  passwordHash String?
  companyName  String?
  role         String   @default("sponsor") // "sponsor" | "organizer"
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  offers           SponsorshipOffer[]
  sponsorPostings SponsorPosting[]
}

model SponsorPosting {
  id            String   @id @default(cuid())
  title         String   // Sponsorship package title
  description   String
  shortDescription String?
  companyName   String
  sponsorType   String   // Type of sponsorship offered
  budget        String?  // Budget range for sponsorship
  deliverables  String   // JSON array of deliverables offered
  benefits      String?  // JSON array of benefits
  targetAudience String? // Target audience description
  targetUniversities String? // JSON array of target universities
  categories    String   // JSON array of event categories they sponsor
  contactEmail  String
  contactPhone  String?
  website       String?
  socialMediaLinks String?
  photos        String?  // JSON array of photo URLs
  
  createdBy     String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  sponsor       Sponsor  @relation(fields: [createdBy], references: [id], onDelete: Cascade)

  @@index([createdBy])
  @@index([sponsorType])
}

model SponsorshipOffer {
  id                  String   @id @default(cuid())
  eventId             String
  sponsorId           String
  offerType           String   // "money" | "product" | "booth" | "service"
  amount              String?
  items               String?  // For product offers
  deliverablesRequested String  // JSON array
  notes               String
  status              String   @default("pending") // "pending" | "accepted" | "declined"
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  event   Event   @relation(fields: [eventId], references: [id], onDelete: Cascade)
  sponsor Sponsor @relation(fields: [sponsorId], references: [id], onDelete: Cascade)

  @@index([eventId])
  @@index([sponsorId])
  @@index([status])
}
